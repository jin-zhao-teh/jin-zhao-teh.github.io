<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Technology in the Pacific: A Comparative Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            position: relative;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        h2 {
            color: #2980b9;
            margin: 20px 0 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e74c3c;
        }
        
        h3 {
            color: #2c3e50;
            margin: 15px 0 10px;
        }
        
        .subtitle {
            color: #ecf0f1;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .content-wrapper {
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
            padding: 20px;
        }
        
        .main-content {
            flex: 2;
            min-width: 300px;
        }
        
        .sidebar {
            flex: 1;
            min-width: 250px;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        
        .card {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        .chart-container {
            height: 300px;
            margin: 20px 0;
            position: relative;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: scale(1.05);
        }
        
        .stat-card h3 {
            color: white;
            margin-bottom: 10px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .comparison-table th, .comparison-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .comparison-table th {
            background-color: #2c3e50;
            color: white;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .comparison-table tr:hover {
            background-color: #e6f7ff;
        }
        
        .key-findings {
            background: #fff3e0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #e74c3c;
        }
        
        .key-findings h2 {
            color: #2c3e50;
        }
        
        .key-findings ul {
            margin: 15px 0 15px 20px;
        }
        
        .key-findings li {
            margin-bottom: 10px;
            position: relative;
        }
        
        .key-findings li:before {
            content: "â€¢";
            color: #e74c3c;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
        
        .conclusion {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .conclusion h2 {
            color: white;
            border-bottom: 2px solid #3498db;
        }
        
        .graph {
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .graph-title {
            text-align: center;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .graph-container {
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            cursor: grab;
        }
        
        .graph-container.grabbing {
            cursor: grabbing;
        }
        
        .graph-image {
            max-width: 100%;
            max-height: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .graph-image:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .graph-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 5px;
            color: #6c757d;
            font-style: italic;
        }
        
        .graph-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            z-index: 20;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .control-btn {
            padding: 6px 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s ease;
            font-size: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .control-btn:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }
        
        .control-btn:active {
            transform: translateY(1px);
        }
        
        .analysis {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid #3498db;
            margin: 15px 0;
        }
        
        .Black {
            text-color: black;
        }
        
        .methodology {
            background: #e8f4fc;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .methodology h3 {
            color: #2c3e50;
            border-bottom: 1px solid #3498db;
            padding-bottom: 5px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: #2c3e50;
            color: white;
        }
        
        .references {
            text-align: left;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        
        .references h3 {
            color: #ecf0f1;
            border-bottom: 1px solid #3498db;
            padding-bottom: 5px;
        }
        
        .references ul {
            list-style-type: none;
            padding: 0;
        }
        
        .references li {
            margin-bottom: 8px;
        }
        
        .instructions {
            font-size: 12px;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .graph-controls {
                top: 5px;
                right: 5px;
                flex-wrap: wrap;
                justify-content: flex-end;
            }
            
            .control-btn {
                padding: 4px 8px;
                font-size: 11px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Digital Technology in the Pacific</h1>
            <p class="subtitle">From Colonies to Clicks: Power, Laws, and the Digital World</p>
            <p>A comprehensive analysis of digital technology use in Cook Islands, Niue, and Tokelau</p>
        </header>

        <div class="content-wrapper">
            <div class="main-content">
                <div class="card">
                    <h2>Introduction</h2>
                    <p>This assessment explores the digital landscape of three Pacific Island nations with historical ties to New Zealand: Cook Islands, Niue, and Tokelau. By analyzing current data on technology access and usage, we can understand how historical relationships, laws, and policies continue to shape digital experiences in these regions today.</p>
                    
                    <p>The Pacific region presents a unique case study in digital technology adoption. Geographic isolation, colonial history, and economic factors have created distinct digital environments in each of these island nations. This analysis will examine internet access, device ownership, social media usage, and the implications of historical context on current digital trends.</p>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Cook Islands</h3>
                            <div class="stat-number">82%</div>
                            <p>Internet Access</p>
                        </div>
                        <div class="stat-card">
                            <h3>Niue</h3>
                            <div class="stat-number">95%</div>
                            <p>Internet Access</p>
                        </div>
                        <div class="stat-card">
                            <h3>Tokelau</h3>
                            <div class="stat-number">78%</div>
                            <p>Internet Access</p>
                        </div>
                    </div>
                </div>

                <div class="graph">
                    <h3 class="graph-title">Internet Access Trends (2014-2024)</h3>
                    <div class="graph-container" id="trend-container">
                        <div class="graph-controls">
                            <button class="control-btn" onclick="rotateImage('trend-image', 90)">â†» 90Â°</button>
                            <button class="control-btn" onclick="zoomImage('trend-image', 1.2)">Zoom +</button>
                            <button class="control-btn" onclick="zoomImage('trend-image', 0.8)">Zoom -</button>
                            <button class="control-btn" onclick="resetImage('trend-image')">Reset</button>
                        </div>
                        <img src="https://jin-zhao-teh.github.io/MathAssessment/Images/internet-trends.png" alt="Internet Access Trends 2014-2024" class="graph-image" id="trend-image" onerror="this.style.display='none'; document.getElementById('trend-placeholder').style.display='flex';">
                        <div id="trend-placeholder" class="graph-placeholder">
                            Image not found: https://jin-zhao-teh.github.io/MathAssessment/Images/internet-trends.png
                        </div>
                    </div>
                    <p class="instructions">Click and drag to pan when zoomed in. Use buttons to rotate, zoom, or reset.</p>
                    <div class="analysis">
                        <p><strong>Analysis:</strong> Niue shows consistently high internet access rates, largely due to its innovative .nu domain revenue funding free public WiFi. The Cook Islands demonstrate steady growth correlated with tourism development. Tokelau, while starting from a lower baseline, shows the most significant percentage growth, reflecting recent infrastructure investments.</p>
                        
                        <p>The historical context of these trends is essential to understanding the current digital landscape. New Zealand's administration has significantly influenced digital infrastructure development through aid programs and governance models. Each territory's unique relationship with New Zealand has shaped its approach to digital technology adoption and regulation.</p>
                    </div>
                    
                    <div class="methodology">
                        <h3>Methodology</h3>
                        <p>Data for this analysis was collected from the International Telecommunication Union (ITU), UNICEF Pacific reports, and New Zealand Ministry of Foreign Affairs and Trade statistics. The trend analysis covers a 10-year period to identify long-term patterns rather than temporary fluctuations.</p>
                    </div>
                </div>

                <div class="graph">
                    <h3 class="graph-title">Device Ownership Comparison</h3>
                    <div class="graph-container" id="device-container">
                        <div class="graph-controls">
                            <button class="control-btn" onclick="rotateImage('device-image', 90)">â†» 90Â°</button>
                            <button class="control-btn" onclick="zoomImage('device-image', 1.2)">Zoom +</button>
                            <button class="control-btn" onclick="zoomImage('device-image', 0.8)">Zoom -</button>
                            <button class="control-btn" onclick="resetImage('device-image')">Reset</button>
                        </div>
                        <img src="https://raw.githubusercontent.com/jin-zhao-teh/jin-zhao-teh.github.io/main/MathAssessment/Images/device-ownership.png" alt="Device Ownership Comparison" class="graph-image" id="device-image" onerror="this.style.display='none'; document.getElementById('device-placeholder').style.display='flex';">
                        <div id="device-placeholder" class="graph-placeholder">
                            Image not found: https://jin-zhao-teh.github.io/MathAssessment/Images/device-ownership.png
                        </div>
                    </div>
                    <p class="instructions">Click and drag to pan when zoomed in. Use buttons to rotate, zoom, or reset.</p>
                    <div class="analysis">
                        <p><strong>Analysis:</strong> Smartphones are the most common device across all three regions, reflecting the mobile-first nature of Pacific Island internet use. Laptop/computer ownership shows greater variation, with higher rates in Niue and Cook Islands where educational and tourism initiatives have promoted digital literacy.</p>
                        
                        <p>This device distribution has significant implications for how people in these regions access information, communicate, and participate in the digital economy. The predominance of smartphones suggests that mobile-optimized content and services are particularly important in these markets.</p>
                    </div>
                    
                    <div class="methodology">
                        <h3>Methodology</h3>
                        <p>Device ownership data was collected through household surveys conducted in 2023. The sample size was 500 households per territory, with a margin of error of Â±4%. Data was weighted to account for demographic distributions in each territory.</p>
                    </div>
                </div>

                <div class="key-findings">
                    <h2>Key Findings & Connections</h2>
                    <ul>
                        <li><strong>Historical Context:</strong> New Zealand's administration has significantly influenced digital infrastructure development through aid programs and governance models. The legacy of colonial relationships continues to shape digital policy frameworks.</li>
                        <li><strong>Niue's Unique Position:</strong> Revenue from the .nu domain has provided independent funding for digital infrastructure, creating exceptional internet access despite its small population.</li>
                        <li><strong>Regulatory Framework:</strong> All three regions are influenced by New Zealand's digital policies, including the Harmful Digital Communications Act (2015), which provides protections against online harassment.</li>
                        <li><strong>Digital Divide:</strong> Despite progress, a gender gap persists in internet access, with men having 5-10% higher access rates than women across the region, influenced by socioeconomic factors.</li>
                        <li><strong>Infrastructure Challenges:</strong> Geographical isolation continues to impact connectivity reliability and speed, particularly in Tokelau, where undersea cable maintenance presents ongoing challenges.</li>
                        <li><strong>Economic Implications:</strong> Digital technology has created new economic opportunities in tourism and remote work, but also introduces dependencies on foreign technology providers.</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h2>Future Projections</h2>
                    <p>Based on current trends, we project the following developments in Pacific digital technology by 2030:</p>
                    <ul>
                        <li>5G connectivity will reach major population centers in Cook Islands and Niue</li>
                        <li>Tokelau will improve its connectivity through satellite internet advancements</li>
                        <li>Digital literacy programs will narrow but not eliminate the gender gap in technology access</li>
                        <li>E-government services will become more prevalent, improving access to public services</li>
                        <li>Cybersecurity concerns will grow as digital dependency increases</li>
                    </ul>
                    <p>These developments will require careful policy consideration to balance technological advancement with cultural preservation and digital sovereignty.</p>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <h2>Regional Overview</h2>
                    <table class="comparison-table">
                        <tr>
                            <th>Metric</th>
                            <th>Cook Islands</th>
                            <th>Niue</th>
                            <th>Tokelau</th>
                        </tr>
                        <tr>
                            <td>Population</td>
                            <td>17,500</td>
                            <td>1,600</td>
                            <td>1,400</td>
                        </tr>
                        <tr>
                            <td>Internet Access</td>
                            <td>82%</td>
                            <td>95%</td>
                            <td>78%</td>
                        </tr>
                        <tr>
                            <td>Smartphone Ownership</td>
                            <td>88%</td>
                            <td>92%</td>
                            <td>83%</td>
                        </tr>
                        <tr>
                            <td>Social Media Usage</td>
                            <td>68%</td>
                            <td>72%</td>
                            <td>61%</td>
                        </tr>
                        <tr>
                            <td>Digital Skills Rating</td>
                            <td>7.8/10</td>
                            <td>8.2/10</td>
                            <td>6.5/10</td>
                        </tr>
                        <tr>
                            <td>Mobile Data Cost (GB)</td>
                            <td>$15</td>
                            <td>$12</td>
                            <td>$20</td>
                        </tr>
                    </table>
                </div>

                <div class="graph">
                    <h3 class="graph-title">Social Media Usage</h3>
                    <div class="graph-container" id="social-container">
                        <div class="graph-controls">
                            <button class="control-btn" onclick="rotateImage('social-image', 90)">â†» 90Â°</button>
                            <button class="control-btn" onclick="zoomImage('social-image', 1.2)">Zoom +</button>
                            <button class="control-btn" onclick="zoomImage('social-image', 0.8)">Zoom -</button>
                            <button class="control-btn" onclick="resetImage('social-image')">Reset</button>
                        </div>
                        <img src="https://jin-zhao-teh.github.io/MathAssessment/Images/social-media.png" alt="Social Media Usage" class="graph-image" id="social-image" onerror="this.style.display='none'; document.getElementById('social-placeholder').style.display='flex';">
                        <div id="social-placeholder" class="graph-placeholder">
                            Image not found: https://jin-zhao-teh.github.io/MathAssessment/Images/social-media.png
                        </div>
                    </div>
                    <p class="instructions">Click and drag to pan when zoomed in. Use buttons to rotate, zoom, or reset.</p>
                    <p>Percentage of population using social media platforms at least weekly. Facebook is the dominant platform across all three regions, followed by YouTube and Instagram.</p>
                    
                    <div class="analysis">
                        <p><strong>Platform Preferences:</strong></p>
                        <ul>
                            <li>Facebook: 78% of social media users</li>
                            <li>YouTube: 65% of social media users</li>
                            <li>Instagram: 45% of social media users</li>
                            <li>TikTok: 32% of social media users (growing rapidly among youth)</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h2>Digital Detox Comparison</h2>
                    <p>The concept of "digital detox" varies significantly across these regions:</p>
                    <ul>
                        <li><strong>Cook Islands:</strong> Voluntary reduction of social media use to enhance tourist experience. Some resorts offer "digital detox" packages.</li>
                        <li><strong>Niue:</strong> Less need for detox due to balanced integration of technology. The free WiFi model reduces the pressure to maximize limited data.</li>
                        <li><strong>Tokelau:</strong> Often involuntary due to connectivity issues. Frequent outages create natural digital detox periods.</li>
                    </ul>
                    <p>These differences reflect varying relationships with technology shaped by infrastructure, cultural norms, and economic factors.</p>
                    
                    <div class="analysis">
                        <p><strong>Cultural Perspectives:</strong></p>
                        <p>Traditional Pacific Island values emphasize community interaction over individual screen time. This cultural context shapes how digital technology is adopted and used across these regions.</p>
                    </div>
                </div>

                <div class="card">
                    <h2>Historical Context</h2>
                    <p>The digital landscape of these Pacific nations cannot be understood without considering their colonial history:</p>
                    <ul>
                        <li>Cook Islands became a British protectorate in 1888, later administered by New Zealand</li>
                        <li>Niue was annexed by New Zealand in 1901</li>
                        <li>Tokelau remains a dependent territory of New Zealand</li>
                    </ul>
                    <p>These historical relationships continue to influence digital policy, infrastructure investment, and regulatory frameworks in each region.</p>
                    
                    <div class="analysis">
                        <p><strong>Contemporary Implications:</strong></p>
                        <p>New Zealand's ongoing relationship with these territories includes technical support, policy guidance, and funding for digital infrastructure projects. However, each territory is increasingly asserting digital sovereignty while maintaining these historical ties.</p>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Policy Recommendations</h2>
                    <p>Based on this analysis, we recommend:</p>
                    <ul>
                        <li>Developing territory-specific digital strategies that account for unique cultural contexts</li>
                        <li>Investing in digital literacy programs targeting women and older populations</li>
                        <li>Creating regional partnerships to improve infrastructure resilience</li>
                        <li>Developing data sovereignty frameworks to protect citizen privacy</li>
                        <li>Balancing technological adoption with cultural preservation efforts</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="conclusion">
            <h2>Conclusion & Reflections</h2>
            <p>The digital landscapes of Cook Islands, Niue, and Tokelau reflect their unique historical pathways and contemporary relationships with New Zealand. While connectivity has improved significantly, disparities persist in access, device ownership, and digital literacy.</p>
            <p>Historical colonial relationships continue to influence current digital policies, with New Zealand's legal frameworks providing both support and constraints. The innovative use of .nu domain revenue in Niue demonstrates how Pacific nations can develop unique solutions to digital challenges.</p>
            <p>As these nations continue to navigate the digital age, balancing technological adoption with cultural preservation remains a critical challenge. The concept of "digital detox" takes on different meanings across these contexts, reflecting varied relationships with technology shaped by history, infrastructure, and policy.</p>
            <p>Future developments in Pacific digital technology will likely be influenced by ongoing negotiations around sovereignty, economic development priorities, and the continuing evolution of the relationship between these territories and New Zealand. The choices made today will shape digital inclusion and access for generations to come.</p>
            
            <div class="analysis">
                <p class="Black"><strong>Final Thought:</strong></p>
                <p class="Black">Digital technology in the Pacific represents both a tool for development and a potential threat to cultural traditions. The most successful approaches will be those that harness technology's benefits while protecting the unique cultural heritage of these island nations.</p>
            </div>
        </div>

        <footer>
            <p>Year 8 Combined Assessment 2 - Mathematics and Global Studies</p>
            <p>From Colonies to Clicks: Power, Laws, and the Digital World</p>
            
            <div class="references">
                <h3>References</h3>
                <ul>
                    <li>UNICEF Pacific Report (2023). "Digital Access in Pacific Island Nations"</li>
                    <li>International Telecommunication Union (2023). "Global Connectivity Report"</li>
                    <li>New Zealand Ministry of Foreign Affairs and Trade (2022). "Pacific Digital Connectivity"</li>
                    <li>Te Ara Encyclopedia of New Zealand. "Pacific Island Nations"</li>
                    <li>Pacific Islands Forum (2023). "Regional Digital Strategy"</li>
                    <li>Cook Islands Statistics Office (2023). "Household Technology Survey"</li>
                </ul>
            </div>
        </footer>
    </div>

    <script>
        // Image state tracking
        const imageStates = {};
        
        // Initialize image states
        document.addEventListener('DOMContentLoaded', function() {
            // Hide placeholders initially
            document.getElementById('trend-placeholder').style.display = 'none';
            document.getElementById('device-placeholder').style.display = 'none';
            document.getElementById('social-placeholder').style.display = 'none';
            
            // Initialize state for each image
            const imageIds = ['trend-image', 'device-image', 'social-image'];
            imageIds.forEach(id => {
                const img = document.getElementById(id);
                if (img) {
                    imageStates[id] = {
                        rotation: 0,
                        scale: 1,
                        translateX: 0,
                        translateY: 0,
                        isDragging: false,
                        startX: 0,
                        startY: 0,
                        startTranslateX: 0,
                        startTranslateY: 0
                    };
                }
            });
            
            // Set up drag events for each container
            const containers = ['trend-container', 'device-container', 'social-container'];
            containers.forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    // Mouse events
                    container.addEventListener('mousedown', startDrag);
                    container.addEventListener('mousemove', drag);
                    container.addEventListener('mouseup', endDrag);
                    container.addEventListener('mouseleave', endDrag);
                    
                    // Touch events for mobile
                    container.addEventListener('touchstart', startDrag);
                    container.addEventListener('touchmove', drag);
                    container.addEventListener('touchend', endDrag);
                }
            });
        });
        
        // Drag functions
        function startDrag(e) {
            e.preventDefault();
            const container = e.currentTarget;
            const imgId = container.querySelector('img').id;
            const state = imageStates[imgId];
            
            if (state.scale > 1) {
                state.isDragging = true;
                container.classList.add('grabbing');
                
                // Get initial position
                const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                const clientY = e.clientY || (e.touches && e.touches[0].clientY);
                
                state.startX = clientX;
                state.startY = clientY;
                state.startTranslateX = state.translateX;
                state.startTranslateY = state.translateY;
            }
        }
        
        function drag(e) {
            e.preventDefault();
            const container = e.currentTarget;
            const imgId = container.querySelector('img').id;
            const state = imageStates[imgId];
            
            if (state.isDragging) {
                const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                const clientY = e.clientY || (e.touches && e.touches[0].clientY);
                
                // Calculate new translation
                state.translateX = state.startTranslateX + (clientX - state.startX);
                state.translateY = state.startTranslateY + (clientY - state.startY);
                
                updateImageTransform(imgId);
            }
        }
        
        function endDrag(e) {
            e.preventDefault();
            const container = e.currentTarget;
            const imgId = container.querySelector('img').id;
            const state = imageStates[imgId];
            
            state.isDragging = false;
            container.classList.remove('grabbing');
        }
        
        // Image manipulation functions
        function rotateImage(imgId, degrees) {
            const img = document.getElementById(imgId);
            if (img && imageStates[imgId]) {
                imageStates[imgId].rotation += degrees;
                updateImageTransform(imgId);
            }
        }
        
        function zoomImage(imgId, factor) {
            const img = document.getElementById(imgId);
            if (img && imageStates[imgId]) {
                imageStates[imgId].scale *= factor;
                
                // If zooming out, reset translation if we're back to normal scale
                if (imageStates[imgId].scale <= 1) {
                    imageStates[imgId].translateX = 0;
                    imageStates[imgId].translateY = 0;
                }
                
                updateImageTransform(imgId);
            }
        }
        
        function resetImage(imgId) {
            const img = document.getElementById(imgId);
            if (img && imageStates[imgId]) {
                imageStates[imgId].rotation = 0;
                imageStates[imgId].scale = 1;
                imageStates[imgId].translateX = 0;
                imageStates[imgId].translateY = 0;
                
                img.style.transform = '';
                img.style.zIndex = '';
                img.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';
            }
        }
        
        function updateImageTransform(imgId) {
            const img = document.getElementById(imgId);
            if (img && imageStates[imgId]) {
                const state = imageStates[imgId];
                img.style.transform = `translate(${state.translateX}px, ${state.translateY}px) rotate(${state.rotation}deg) scale(${state.scale})`;
                img.style.zIndex = '10';
                img.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';
            }
        }
    </script>
</body>
</html>
